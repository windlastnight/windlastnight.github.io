(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{412:function(s,a,e){s.exports=e.p+"assets/img/harbor1.54f85218.png"},497:function(s,a,e){"use strict";e.r(a);var t=e(25),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"harbor应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor应用"}},[s._v("#")]),s._v(" harbor应用")]),s._v(" "),t("p",[s._v("下载成功，并解压")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf harbor-online-installer-v1.8.1.tgz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("修改harbor.yml 是这个项目的配置文件")]),s._v(" "),t("ol",[t("li",[s._v("修改 hostname 先项\n将 hostname 改成你本机的网址或IP\nhostname = A.B.C.D  # 写你自己的网址或IP，公网访问要写公网IP")]),s._v(" "),t("li",[s._v("支持Http 访问")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("customize_crt = false\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[t("p",[s._v("运行\n修改完配置文件后，运行 "),t("code",[s._v("./prepare")]),s._v("，它会哪所配置文件修改一文件\n运行 "),t("code",[s._v("./install.sh")]),s._v("\n运行成功，"),t("code",[s._v("docker ps")]),s._v(" 查看，可以看到服务已经起来了。\n账号默认是admin，密码默认Harbor12345（就是你上班配置文件中配置的，如果没有改动的话就是这个）")])]),s._v(" "),t("li",[t("p",[s._v("常用管理命令\n停止服务： "),t("code",[s._v("docker-compose stop")]),s._v("\n开始服务： "),t("code",[s._v("docker-compose start")]),s._v("\nGUIl界面使用")])]),s._v(" "),t("li",[t("p",[s._v("新建项目\n新建一个项目，命名为 ainirobot，并设置访问级别为公开。")])])]),s._v(" "),t("p",[s._v("这里的项目就是一私有化的Docker镜像仓库。")]),s._v(" "),t("p",[s._v("上传镜像")]),s._v(" "),t("ol",[t("li",[s._v("修改Docker配置\ndocker 默认是按 https 请求的，由于我搭的私有库是 http 的，所以需要修改 docker 配置，将信任的库的地址写上\n修改文件 "),t("code",[s._v("/etc/docker/daemon.json")])])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"insecure-registries"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A.B.C.D"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("打开docker-compose.yml添加如下内容，注意前边的空格\n"),t("img",{attrs:{src:e(412),alt:"idea配置"}})]),s._v(" "),t("p",[s._v("然后重启docker")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl daemon-reload\nsystemctl restart docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("制作镜像\n将 mongo 制作成一个私有镜像， mongo 为我之前从 docker hub 上拉取的镜像。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker tag mongo A.B.C.D/ainirobot/nebulae_mongo:0.0.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("上传")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker login -u用户名 -p 密码 harbor地址\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("PUSH")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker push A.B.C.D/ainirobot/nebulae_mongo:0.0.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#镜像打标签\n[root@centos7 ~]#docker tag 镜像名:标签 私服地址/仓库项目名/镜像名:标签\n\n#推送到私服\n[root@centos7 ~]#docker push  私服地址/仓库项目名/镜像名：标签  \n\n#从私服拉取镜像\n[root@centos7 ~]#docker pull 私服地址/仓库项目名/镜像名：标签\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);